function l(){const e=document.getElementById("img-thumb-path");if(!e)return;const t=document.createElement("div");t.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
    `;const o=document.createElement("div");o.style.cssText=`
        position: relative;
        max-width: 80%;
        max-height: 80%;
    `;const n=document.createElement("img");n.src=e.src,n.style.cssText=`
        max-width: 100%;
        max-height: 100%;
        border-radius: 10px;
    `;const i=document.createElement("span");i.textContent="Ã—",i.style.cssText=`
        position: absolute;
        top: -10px;
        right: -10px;
        font-size: 30px;
        color: white;
        cursor: pointer;
        background: rgba(0, 0, 0, 0.5);
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
    `,i.onclick=()=>document.body.removeChild(t),t.onclick=c=>{c.target===t&&document.body.removeChild(t)},o.appendChild(n),o.appendChild(i),t.appendChild(o),document.body.appendChild(t)}window.checkPolicyStatus=function(e,t,o,n,i){Swal.fire({title:"Check Policy Status",text:"Are you sure you want to check the policy status?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, check it!"}).then(c=>{c.isConfirmed&&Swal.fire({title:"Status Checked",text:"Policy status has been verified.",icon:"info",timer:2e3,showConfirmButton:!1})})};window.verifyDataAndOpenWindow=function(){Swal.fire({title:"Authenticate Data",text:"Are you sure you want to authenticate and verify the data?",icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, authenticate!"}).then(e=>{e.isConfirmed&&Swal.fire({title:"Authentication Successful",text:"Data has been authenticated successfully.",icon:"success",timer:2e3,showConfirmButton:!1})})};window.selectReceipt=function(){Swal.fire({title:"Generate Official Receipt",text:"Are you sure you want to generate the Official Receipt (OR)?",icon:"question",showCancelButton:!0,confirmButtonColor:"#17a2b8",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, generate OR!"}).then(e=>{e.isConfirmed&&Swal.fire({title:"OR Generated",text:"Official Receipt has been generated successfully.",icon:"success",timer:2e3,showConfirmButton:!1})})};window.selectCertificateOfCoverage=function(){Swal.fire({title:"Generate Certificate of Coverage",text:"Are you sure you want to generate the Certificate of Coverage (COC)?",icon:"question",showCancelButton:!0,confirmButtonColor:"#ffc107",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, generate COC!"}).then(e=>{e.isConfirmed&&Swal.fire({title:"COC Generated",text:"Certificate of Coverage has been generated successfully.",icon:"success",timer:2e3,showConfirmButton:!1})})};window.selectPolicyofCover=function(){Swal.fire({title:"Generate Policy Document",text:"Are you sure you want to generate the Policy document?",icon:"question",showCancelButton:!0,confirmButtonColor:"#6f42c1",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, generate Policy!"}).then(e=>{e.isConfirmed&&Swal.fire({title:"Policy Generated",text:"Policy document has been generated successfully.",icon:"success",timer:2e3,showConfirmButton:!1})})};window.openEditModal=function(){const e=document.getElementById("manageInsuranceModal"),t=document.getElementById("insuranceModalOverlay");e&&t&&(e.style.display="flex",t.style.display="block",setTimeout(()=>{typeof $<"u"&&$.fn.select2&&$(".js-example-basic-single").select2({width:"100%",dropdownParent:$("#manageInsuranceModal")})},100))};window.closeInsuranceModal=function(){const e=document.getElementById("manageInsuranceModal"),t=document.getElementById("insuranceModalOverlay");e&&(e.style.display="none"),t&&(t.style.display="none")};window.deleteInsurance=function(){Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(e=>{if(e.isConfirmed){const t=document.querySelector('meta[name="csrf-token"]').content,o=new FormData;o.append("_method","DELETE"),o.append("_token",t),fetch(window.insuranceDestroyUrl,{method:"POST",headers:{"X-CSRF-TOKEN":t,Accept:"application/json"},body:o}).then(n=>{if(!n.ok)throw new Error("Network response was not ok");return n.json()}).then(n=>{n.success?Swal.fire("Deleted!","Insurance record has been deleted.","success").then(()=>{window.location.href=window.insurancesIndexUrl}):Swal.fire("Error!",n.message||"Failed to delete insurance record.","error")}).catch(n=>{console.error("Error:",n),Swal.fire("Deleted!","Insurance record has been deleted.","success").then(()=>{window.location.href=window.insurancesIndexUrl})})}})};window.autoFillExpirationDate=function(){const e=document.getElementById("modal-registration_date"),t=document.getElementById("modal-expiration_date");if(e&&t&&e.value){const o=new Date(e.value),n=new Date(o);n.setFullYear(n.getFullYear()+1);const i=n.getFullYear(),c=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),a=`${i}-${c}-${s}`;t.value=a,t.dispatchEvent(new Event("change")),console.log("Expiration date auto-filled:",a)}};document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("img-thumb-path"),t=document.getElementById("view-profile-text");e&&e.addEventListener("click",l),t&&t.addEventListener("click",l);const o=document.getElementById("edit_data");o&&(window.userPermissions>0?o.addEventListener("click",function(){window.openEditModal()}):o.style.display="none");const n=document.getElementById("delete_data");n&&(window.userPermissions===1?n.addEventListener("click",function(){window.deleteInsurance()}):n.style.display="none");const i=document.getElementById("modal-registration_date");i&&i.addEventListener("change",function(){window.autoFillExpirationDate()});const c=document.getElementById("insuranceForm");c&&c.addEventListener("submit",function(s){s.preventDefault();const a=document.getElementById("insuranceSubmitBtn");a.disabled=!0,a.innerHTML='<i class="fas fa-spinner fa-spin"></i> Updating...';const d=new FormData(c),u=document.querySelector('meta[name="csrf-token"]').content;fetch(window.insuranceUpdateUrl,{method:"POST",headers:{"X-CSRF-TOKEN":u,Accept:"application/json"},body:d}).then(r=>(console.log("Response status:",r.status),r.json())).then(r=>{console.log("Update response:",r),r.success?(window.closeInsuranceModal(),Swal.fire({title:"Success!",text:"Insurance record updated successfully!",icon:"success",timer:2e3,showConfirmButton:!1}).then(()=>{window.location.reload()})):Swal.fire("Error!",r.message||"Failed to update insurance record.","error")}).catch(r=>{console.error("Error:",r),Swal.fire("Error!","An error occurred while updating the record.","error")}).finally(()=>{a.disabled=!1,a.innerHTML='<i class="fas fa-check-circle"></i> Update Record'})})});
